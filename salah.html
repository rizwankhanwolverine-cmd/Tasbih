<!DOCTYPE html>
<html>
<head>
<style>
body {
    background:#050508;
    color:#C2B280;
    font-family:sans-serif;
    margin:0;
    padding:20px;
    display:flex;
    flex-direction:column;
    align-items:center;
}
.title {
    font-size:0.7rem;
    opacity:0.5;
    letter-spacing:3px;
    margin-bottom:12px;
    text-transform:uppercase;
}
.list {
    width:100%;
    max-width:400px;
}
.item {
    background:rgba(194,178,128,0.05);
    border:1px solid rgba(194,178,128,0.1);
    border-radius:14px;
    padding:18px;
    margin-bottom:10px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    cursor:pointer;
}
.item.done {
    background:rgba(194,178,128,0.15);
    border-color:#C2B280;
}
.name { color:white; }
.check {
    width:24px;
    height:24px;
    border:2px solid #C2B280;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:0.8rem;
}
.item.done .check {
    background:#C2B280;
    color:#050508;
}
</style>
</head>

<body>

<div class="title">Daily Prayers</div>
<div class="list" id="list"></div>

<script>
const prayers = ["Fajr","Dhuhr","Asr","Maghrib","Isha"];
let state = JSON.parse(localStorage.getItem('salah_v2')) || {
    Fajr:false, Dhuhr:false, Asr:false, Maghrib:false, Isha:false
};

function render() {
    const list = document.getElementById('list');
    list.innerHTML = '';
    prayers.forEach(p => {
        const div = document.createElement('div');
        div.className = 'item' + (state[p] ? ' done' : '');
        div.innerHTML = `
            <span class="name">${p}</span>
            <div class="check">${state[p] ? 'âœ“' : ''}</div>
        `;

        // ðŸ”‘ FIX: pointerdown instead of click
        div.addEventListener('pointerdown', () => toggle(p));

        list.appendChild(div);
    });
}

function toggle(p) {
    state[p] = !state[p];
    localStorage.setItem('salah_v2', JSON.stringify(state));

    // ðŸ”Š Tap sound
    window.parent.postMessage('play_beed', '*');

    // ðŸŽ‰ Celebrate if all done
    if (Object.values(state).every(v => v)) {
        window.parent.postMessage('celebrate', '*');
    }

    render();
}

render();
</script>

</body>
</html>
